(()=>{"use strict";var e={279:(e,t,i)=>{e.exports=i.p+"assets/25f0d16bb8cae6f8511d.png"},958:(e,t,i)=>{e.exports=i.p+"assets/6423ac0013dd3434590f.png"},274:(e,t,i)=>{e.exports=i.p+"assets/292b1f762438fabbb367.png"},970:(e,t,i)=>{e.exports=i.p+"assets/e119c3226ab8bec33ee1.png"},235:(e,t,i)=>{e.exports=i.p+"assets/57839b3a70defc2da2b7.png"}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,i),r.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{class e{constructor(){}createScenes(t,i,s,n,r){e.scenes.push({sceneName:t,updateCallbacks:i,renderCallbacks:s,sceneUserInput:n,sceneLogic:r})}changeScene(t){const i=e.scenes.find((e=>e.sceneName==t));e.currentScene=i||{sceneName:"notFoundScene",updateCallbacks:[],renderCallbacks:[],sceneUserInput:()=>{},sceneLogic:()=>{}}}}e.scenes=[];class t{constructor(){this.elapsedTime=0,this.startTime=0,this.fps=0}initialize(){requestAnimationFrame(this.loop.bind(this))}loop(i){this.elapsedTime=(i-this.startTime)/1e3,this.startTime=i,this.fps=Math.round(1/this.elapsedTime),this.elapsedTime=Math.min(this.elapsedTime,.1),e.currentScene.sceneLogic(),e.currentScene.sceneUserInput(),this.handleUpdate(this.elapsedTime),this.handleRender(),t.rAF_id=requestAnimationFrame(this.loop.bind(this))}handleUpdate(t){e.currentScene.updateCallbacks.forEach((e=>{e(t)}))}handleRender(){e.currentScene.renderCallbacks.forEach((e=>{e()}))}}t.rAF_id=0;class s{constructor(e){this.canvas=e}handleKeydownInput(e,t){this.canvas.addEventListener("keydown",(i=>{e==i.code&&t()}).bind(this),!1)}handleKeyupInput(e,t){this.canvas.addEventListener("keyup",(i=>{e==i.code&&t()}).bind(this),!1)}handleClickInput(e,t){this.canvas.addEventListener("click",(i=>{let s=this.getMousePosition(this.canvas,i);this.isClickInside(s,e)&&t()}).bind(this),!1)}getMousePosition(e,t){var i=e.getBoundingClientRect();return{x:t.clientX-i.left,y:t.clientY-i.top}}isClickInside(e,t){return e.x>t.x&&e.x<t.x+t.width&&e.y<t.y+t.height&&e.y>t.y}}var n=i(279),r=i(958),h=i(274),a=i(970),c=i(235);class o{constructor(){}static load(e){e.forEach((e=>{const t=new Image;t.src=e.url,this.images.push(Object.assign(Object.assign({},e),{src:t}))}))}static getImage(e){return this.images.find((t=>t.name==e))||{name:"image not foud",src:new Image}}}o.images=[];class d{constructor(e){this.context=e.context,this.x=e.x,this.y=e.y,this.imageWidth=e.imageWidth,this.imageHeight=e.imageHeight,this.image=e.image}}class u{constructor(){this.safeFrame=0,this.currentFrame=0}spriteSheetRenderer(e){this.safeFrame++,this.currentFrame>5&&(this.currentFrame=0),this.safeFrame>60&&(this.safeFrame=0);let t=this.currentFrame%e.numColumns,i=Math.floor(this.currentFrame/e.numColumns);e.context.drawImage(e.image,t*e.frameWidth,i*e.frameHeight,e.frameWidth,e.frameHeight,e.x-e.radius,e.y-e.radius-.4*e.radius,2*e.radius,2.42*e.radius),this.safeFrame%5==0&&this.currentFrame++}backgroundRenderer(e){e.context.drawImage(e.image,e.x,e.y),e.context.drawImage(e.image,e.x-e.imageWidth,e.y)}textRenderer(e){e.context.fillStyle=e.color,e.context.font=`${e.fontSize}px ${e.fontStyle}`,e.context.textAlign=`${e.align}`,e.context.fillText(`${e.text}: ${e.value}`,e.x,e.y)}buttonRenderer(e){let t=e.context.measureText(e.text).width;e.context.beginPath(),e.context.rect(e.x,e.y,e.width,e.height),e.context.fillStyle=e.backgroundColor,e.context.fillRect(e.x,e.y,e.width,e.height),e.context.fill(),e.context.lineWidth=e.borderWidth,e.context.strokeStyle=e.borderColor,e.context.stroke(),e.context.closePath(),e.context.font=`${e.fontSize}pt ${e.fontStyle}`,e.context.fillStyle=e.textColor,e.context.fillText(e.text,375-t/2,200+e.fontSize/2)}}class l extends d{constructor(e){super(e),this.renderer=new u,this.background=e}update(){this.background.x<0&&(this.background.x=this.background.imageWidth),this.background.x-=this.background.speed}render(){this.renderer.backgroundRenderer(this.background)}}class p extends d{constructor(e){super(e),this.context=e.context,this.x=e.x,this.y=e.y,this.vx=e.vx,this.vy=e.vy,this.width=e.width,this.height=e.height,this.image=e.image}update(e){}render(){}}class g extends p{constructor(e){super(e),this.radius=50,this.jumpLimit=225,this.spriteSheetNumRows=2,this.spriteSheetNumColumns=3,this.isJumping=!1,this.isDucking=!1,this.canDuck=!0,this.spriteSheetObject={context:this.context,x:this.x,y:this.y,imageWidth:this.imageWidth,imageHeight:this.imageHeight,frameWidth:this.imageWidth/this.spriteSheetNumColumns,frameHeight:this.imageHeight/this.spriteSheetNumRows,numColumns:this.spriteSheetNumColumns,numRows:this.spriteSheetNumRows,radius:50,image:this.image},this.renderer=new u}update(e){this.renderNewSprite("runningsprite"),this.jump(e),this.duck()}jump(e){this.spriteSheetObject.y=this.spriteSheetObject.y>350?350:this.spriteSheetObject.y,this.isJumping&&(this.renderNewSprite("jumpingsprite"),this.spriteSheetObject.y+=this.vy*e,this.canDuck=!1,this.spriteSheetObject.y<this.jumpLimit&&(this.vy=-this.vy),this.spriteSheetObject.y>350&&(this.isJumping=!1,this.canDuck=!0,this.vy=-this.vy,this.renderNewSprite("runningsprite")))}duck(){this.isDucking&&this.canDuck&&!this.isJumping&&(this.renderNewSprite("slidingsprite"),this.height=50)}render(){this.renderer.spriteSheetRenderer(this.spriteSheetObject)}renderNewSprite(e){const t=o.getImage(e);t&&(this.spriteSheetObject.image=t.src)}}class m extends class{constructor(e){this.context=e.context,this.x=e.x,this.y=e.y,this.text=e.text,this.value=e.value,this.align=e.align,this.fontStyle=e.fontStyle,this.fontSize=e.fontSize,this.color=e.color}}{constructor(e){super(e),this.textObject=e,this.renderer=new u}increaseScore(){this.textObject.value++}render(){this.renderer.textRenderer(this.textObject)}}class x extends p{constructor(e){super(e),this.spriteSheetNumColumns=3,this.spriteSheetNumRows=2,this.vx=e.vx,this.vy=e.vy,this.spriteSheetObject={context:this.context,x:this.x,y:this.y,imageWidth:this.imageWidth,imageHeight:this.imageHeight,frameWidth:this.imageWidth/this.spriteSheetNumColumns,frameHeight:this.imageHeight/this.spriteSheetNumRows,numColumns:this.spriteSheetNumColumns,numRows:this.spriteSheetNumRows,radius:50,image:this.image},this.renderer=new u}update(e){this.spriteSheetObject&&(this.spriteSheetObject.x+=this.vx*e)}render(){this.spriteSheetObject&&this.renderer.spriteSheetRenderer(this.spriteSheetObject)}}class b extends e{constructor(){super(),this.enemySpawnRate=90,this.zombies=[],this.sceneName="Play Scene",this.scene=new e,this.canvas=document.getElementById("my-canvas"),this.context=this.canvas.getContext("2d"),this.canvas.tabIndex=1,this.canvas.focus(),this.inputHanlder=new s(this.canvas),this.preloadImage(),this.background=new l({context:this.context,x:0,y:-300,imageWidth:1e3,imageHeight:400,speed:2,image:o.getImage("backgroundimage").src}),this.score=new m({context:this.context,text:"Score",x:350,y:50,value:0,fontSize:24,fontStyle:"Arial",align:"center",color:"black"}),this.player=new g({context:this.context,x:50,y:350,vx:0,vy:-200,imageHeight:966,imageWidth:1647,height:75,width:50,image:o.getImage("runningsprite").src}),this.scene.createScenes(this.sceneName,[this.player.update.bind(this.player),this.background.update.bind(this.background)],[this.background.render.bind(this.background),this.player.render.bind(this.player),this.score.render.bind(this.score)],this.getUserInput.bind(this),this.gameLogic.bind(this)),this.scene.changeScene("Play Scene")}initialize(){this.zombies=[],this.enemySpawnRate=90,this.score=new m({context:this.context,text:"Score",x:350,y:50,value:0,fontSize:24,fontStyle:"Arial",align:"center",color:"black"}),this.background=new l({context:this.context,x:0,y:-300,imageWidth:1e3,imageHeight:400,speed:2,image:o.getImage("backgroundimage").src}),this.player=new g({context:this.context,x:50,y:350,vx:0,vy:-200,imageHeight:966,imageWidth:1647,height:75,width:50,image:o.getImage("runningsprite").src}),e.currentScene.updateCallbacks=[this.player.update.bind(this.player),this.background.update.bind(this.background)],e.currentScene.renderCallbacks=[this.background.render.bind(this.background),this.player.render.bind(this.player),this.score.render.bind(this.score)]}gameLogic(){b.isRestart&&(this.initialize(),b.isRestart=!1),this.spawnEnemy(),this.enemySpawnRate++,this.checkScore(),this.detectCollision()&&this.scene.changeScene("Game Over Scene")}spawnEnemy(){let t=new x({context:this.context,x:Math.round(Math.random())?1400:1e3,y:350,vx:-300,vy:0,imageHeight:1042,imageWidth:1296,height:75,width:50,image:o.getImage("zombiesprite").src});90==this.enemySpawnRate&&(e.currentScene.renderCallbacks.push(t.render.bind(t)),e.currentScene.updateCallbacks.push(t.update.bind(t)),this.zombies.push(t),this.enemySpawnRate=0)}checkScore(){this.zombies[0]&&this.zombies[0].spriteSheetObject.x<0&&(this.score.increaseScore(),this.zombies.shift(),e.currentScene.updateCallbacks.splice(2,1),e.currentScene.renderCallbacks.splice(3,1))}detectCollision(){let e;for(let t=0;t<this.zombies.length;t++)if(e=this.zombies[t],this.rectIntersect(this.player.spriteSheetObject.x,this.player.spriteSheetObject.y,this.player.width,this.player.height,e.spriteSheetObject.x,e.spriteSheetObject.y,e.width,e.height))return!0}rectIntersect(e,t,i,s,n,r,h,a){return!(n>i+e||e>h+n||r>s+t||t>a+r)}getUserInput(){const e=new s(this.canvas);e.handleKeydownInput("ArrowUp",(()=>{this.player.isJumping=!0})),e.handleKeydownInput("ArrowDown",(()=>{this.player.isDucking=!0})),e.handleKeyupInput("ArrowDown",(()=>{this.player.isDucking=!1}))}preloadImage(){o.load([{name:"backgroundimage",url:n},{name:"zombiesprite",url:c},{name:"runningsprite",url:h},{name:"jumpingsprite",url:r},{name:"slidingsprite",url:a}])}}b.isRestart=!1;class y{constructor(e){this.buttonObject=e,this.renderer=new u}render(){this.renderer.buttonRenderer(this.buttonObject)}}new b,new class extends e{constructor(){super(),this.scene=new e,this.sceneName="Game Over Scene",this.canvas=document.getElementById("my-canvas"),this.context=this.canvas.getContext("2d"),this.canvas.focus(),this.popup=new y({context:this.context,x:250,y:150,width:250,height:100,text:"Restart",textColor:"#000000",backgroundColor:"rgba(225,225,225,0.5)",borderWidth:2,borderColor:"#000000",fontStyle:"Kremlin Pro Web",fontSize:24}),this.scene.createScenes(this.sceneName,[],[this.popup.render.bind(this.popup)],this.getUserInput.bind(this),(()=>{}))}getUserInput(){new s(this.canvas).handleClickInput({x:250,y:150,width:250,height:100},(()=>{this.scene.changeScene("Play Scene"),b.isRestart=!0}))}},(new t).initialize()})()})();