(()=>{"use strict";class t{constructor(t){this.context=t.context,this.x=t.x,this.y=t.y,this.vx=t.vx,this.vy=t.vy,this.colliding=!1}update(t){}render(){}}class e extends t{constructor(t){super(t),this.height=0,this.width=0}update(t){this.x+=this.vx*t}render(){}}class i extends e{constructor(t){super(t),this.height=25,this.width=25}render(){this.context.fillStyle="red",this.context.fillRect(this.x,this.y,this.width,this.height)}}class s extends e{constructor(t){super(t),this.height=75,this.width=25}render(){this.context.fillStyle="green",this.context.fillRect(this.x,this.y,this.width,this.height)}}class h extends t{constructor(t){super(t),this.height=0,this.width=750}update(t){}render(){this.context.fillStyle="black",this.context.fillRect(this.x,this.y,this.width,this.height)}}class n extends t{constructor(t){super(t),this.height=50,this.width=25,this.isJumping=!1,this.jumpLimit=225,this.isDucking=!1,this.canDuck=!0}update(t){this.jump(t),this.duck()}jump(t){this.y=this.y>350?350:this.y,this.isJumping&&(this.y+=this.vy*t,this.canDuck=!1),this.y<this.jumpLimit&&(this.vy=-this.vy),this.y>350&&(this.isJumping=!1,this.canDuck=!0,this.vy=-this.vy)}duck(){this.isDucking&&this.canDuck&&!this.isJumping?(this.height=20,this.y=380):this.height=50}render(){this.context.fillStyle="black",this.context.fillRect(this.x,this.y,this.width,this.height)}}class c{constructor(t,e,i,s){this.context=t,this.x=e,this.y=i,this.value=s}increaseScore(){this.value++}render(){this.context.fillStyle="black",this.context.font="25px Arial",this.context.textAlign="center",this.context.fillText(`Score: ${this.value}`,this.x,this.y)}}document.getElementById("my-button"),(new class{constructor(){this.position=0,this.rAF_id=0,this.startTime=0,this.elapsedTime=0,this.fps=0,this.rectX=0,this.rectY=0,this.gameTimePassed=0,this.enemies=[],this.enemySpawnRate=90,this.myText=document.getElementById("my-text"),this.canvas=document.getElementById("my-canvas"),this.context=this.canvas.getContext("2d"),this.myObject=document.getElementById("my-object"),this.canvas.tabIndex=1,this.canvas.focus(),this.score=new c(this.context,350,50,0),this.player=new n({context:this.context,x:50,y:350,vx:0,vy:-200}),this.ground=new h({context:this.context,x:0,y:400,vx:0,vy:0})}initialize(){this.createWorld(),this.startTime=performance.now(),requestAnimationFrame(this.loop.bind(this))}createWorld(){this.enemies=[]}loop(t){this.elapsedTime=(t-this.startTime)/1e3,this.startTime=t,this.fps=Math.round(1/this.elapsedTime),this.elapsedTime=Math.min(this.elapsedTime,.1),this.spawnEnemy(),this.enemySpawnRate++;for(let t=0;t<this.enemies.length;t++)this.enemies[t].update(this.elapsedTime);if(this.handleInput(),this.detectCollision())return cancelAnimationFrame(this.rAF_id),confirm("You lose! Play again?")&&(this.player=new n({context:this.context,x:50,y:350,vx:0,vy:-200}),this.score=new c(this.context,350,50,0),this.initialize()),!1;this.checkScore(),this.player.update(this.elapsedTime),this.clearCanvas();for(let t=0;t<this.enemies.length;t++)this.enemies[t].render();this.player.render(),this.ground.render(),this.score.render(),this.rAF_id=requestAnimationFrame(this.loop.bind(this))}clearCanvas(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}handleInput(){this.canvas.addEventListener("keydown",this.keyDownEventHandler.bind(this),!1),this.canvas.addEventListener("keyup",this.keyUpEventHandler.bind(this),!1)}keyDownEventHandler(t){return"ArrowUp"==t.code&&(this.player.isJumping=!0),"ArrowDown"==t.code&&(this.player.isDucking=!0),!1}keyUpEventHandler(t){return"ArrowDown"==t.code&&(this.player.isDucking=!1),!1}detectCollision(){let t;for(let e=0;e<this.enemies.length;e++)if(t=this.enemies[e],this.rectIntersect(this.player.x,this.player.y,this.player.width,this.player.height,t.x,t.y,t.width,t.height))return!0}rectIntersect(t,e,i,s,h,n,c,r){return!(h>i+t||t>c+h||n>s+e||e>r+n)}checkScore(){this.enemies[0]&&this.enemies[0].x<0&&(this.score.increaseScore(),this.enemies.shift())}spawnEnemy(){let t=Math.round(Math.random())?new s({context:this.context,x:700,y:325,vx:-200,vy:0}):new i({context:this.context,x:700,y:350,vx:-200,vy:0});90==this.enemySpawnRate&&(this.enemies.push(t),this.enemySpawnRate=0)}}).initialize()})();